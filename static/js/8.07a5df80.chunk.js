(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[8],{1064:function(e,n,t){"use strict";var a=t(396);t.d(n,"b",(function(){return a.a}));var i=t(397);t.d(n,"a",(function(){return i.a}));var o=t(398);t.d(n,"c",(function(){return o.a}))},1065:function(e,n,t){"use strict";t.d(n,"a",(function(){return g})),t.d(n,"b",(function(){return b}));var a=t(0),i=t.n(a),o=t(7),r=t(34),l=t(143),c=t(299),u=t(1017),d=t(664),s=t(665),m=t(41),v=c.a.TextArea,f=new l.b,h=new m.a,g={name:{id:"name",name:"Lo\u1ea1i m\xf3n",width:130,fixed:!0,render:function(e,n,t){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=(null===o||void 0===o?void 0:o.recipeKinds)||{};return i.a.createElement("strong",{className:"ml-2",style:{color:"blue"}},(null===r||void 0===r||null===(a=r[e])||void 0===a?void 0:a.name)||e)}},loaiMon:{id:"name",name:"Lo\u1ea1i m\xf3n",className:"text-small",width:130,render:function(e){return i.a.createElement("strong",null,e)}},tenMon:{id:"tenMon",name:"T\xean m\xf3n",className:"text-small",width:190,render:function(e,n,t,a){var o=a.shiftId,l=a.coSoId,c=a.customerId,u=a.dayId,d=a.history,s=a.customerGroupId,m=a.isView,v=e,h=n.id;return v?i.a.createElement("div",{style:{color:"#1012ff"},className:"hoverClass font-weight-bold",onClick:function(){if(m)return null;var e=[[r.c.MODAL_ID,r.a.editRecipe.id],[r.c.COSO_ID,l],[r.c.CUSTOMER_ID,c],[r.c.CUSTOMER_GROUP_ID,s],[r.c.RECIPE_ID,v]];f.pushURL(d,e)}},v):i.a.createElement("div",{className:"hoverClass",onClick:function(){if(console.log(m,"isView"),m)return null;var e=[[r.c.MODAL_ID,r.a.selectRecipe.id],[r.c.SHIFT_ID,o],[r.c.KIND_ID,h],[r.c.DAY_ID,u],[r.c.RECIPE_ID,v]];f.pushURL(d,e)}},"--")}},giaMon:{id:"giaMon",name:"Gi\xe1 m\xf3n",className:"text-small",width:80,align:"center",render:function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=a.giaPhanAn,l=i.a.createElement("strong",{className:"text-danger float-right"},i.a.createElement("sub",null,Object(o.j)(e,r),"%")),c=i.a.createElement(u.a,null,i.a.createElement(d.a,{sm:24}," ",l));return e?c:""}},soPhanThem:{id:"soPhanThem",name:"SP th\xeam",className:"text-small",align:"center",width:80,render:function(e,n,t,a){var o=a.isInput,r=a.setIsInput,l=a.shiftId,c=a.onUpdate,u=a.isView,d="soPhanThem",m=n.id;return o.shiftId!==l||o.type!==d||u?i.a.createElement("div",{className:"hoverClass font-weight-bold",onClick:function(){return r({shiftId:l,type:d,recipeKindId:m})}},e||"--"):i.a.createElement(s.a,{tabIndex:t+1,autoFocus:(null===o||void 0===o?void 0:o.recipeKindId)===m,size:"small",step:5,defaultValue:e||"",onBlur:function(e){var n=Number(e.target.value);c(n,{type:d,recipeKindId:m})}})}},soPhanAn:{id:"soPhanAn",name:"SP \u0103n",align:"center",className:"text-small",width:70,render:function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.isInput,r=a.setIsInput,l=a.shiftId,c=a.onUpdate,u=a.isView,d="soPhanAn",m=n.id,v=n.loaiMonId;return h.checkNotAddSoPhanAn(v)?e||"":o.shiftId!==l||o.type!==d||u?i.a.createElement("div",{className:"hoverClass font-weight-bold",onClick:function(){r({shiftId:l,type:d,recipeKindId:m})}},e||"--"):i.a.createElement(s.a,{tabIndex:t+1,autoFocus:(null===o||void 0===o?void 0:o.recipeKindId)===m,size:"small",min:0,step:10,defaultValue:e||"",onBlur:function(e){var n=Number(e.target.value);c(n,{type:d,recipeKindId:m})}})}},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",align:"right",className:"text-small",width:90,render:function(e){return e?Object(o.d)(e):""}},ghiChu:{id:"ghiChu",name:"Ghi ch\xfa",width:230,className:"text-small",render:function(e,n,t,a){var o=a.isInput,r=a.setIsInput,l=a.shiftId,c=a.onUpdate,u=a.isView,d=n.id;return o.shiftId!==l||"ghiChu"!==o.type||u?i.a.createElement("div",{className:"hoverClass",onClick:function(){return r({shiftId:l,recipeKindId:d,type:"ghiChu"})}},e||"--"):i.a.createElement(v,{rows:3,tabIndex:t+1,autoFocus:d===o.recipeKindId,size:"small",defaultValue:e||"",style:{width:"100%"},onBlur:function(e){var n=e.target.value;c(n,{type:"ghiChu",recipeKindId:d})}})}}},b={name:{id:"name",name:"Lo\u1ea1i m\xf3n",width:110,fixed:!0,render:function(e,n,t){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=(null===o||void 0===o?void 0:o.recipeKinds)||{};return i.a.createElement("strong",{className:"ml-2"},(null===r||void 0===r||null===(a=r[e])||void 0===a?void 0:a.name)||e)}},loaiMon:{id:"tenLoaiMon",name:"Lo\u1ea1i m\xf3n",className:"text-small",width:110,render:function(e){return i.a.createElement("strong",null,e)}},tenMon:{id:"tenMon",name:"T\xean m\xf3n",className:"text-small",width:150,render:function(e){return e&&i.a.createElement("div",{className:"font-weight-bold",style:{color:"blue"}},e)}},giaMon:{id:"giaMon",name:"Gi\xe1 m\xf3n",className:"text-small",width:90,align:"center",render:function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=a.giaPhanAn,l=i.a.createElement("strong",{className:"text-danger float-right"},i.a.createElement("sub",null,Object(o.j)(e,r),"%")),c=i.a.createElement(u.a,null,i.a.createElement(d.a,{sm:24}," ",l));return e?c:""}},soPhanThem:{id:"soPhanThem",name:"SP th\xeam",className:"text-small",align:"right",width:70,render:function(e){return e?Object(o.d)(e):""}},soPhanAn:{id:"soPhanAn",name:"SP \u0103n",className:"text-small",align:"right",width:60,render:function(e){return e?Object(o.d)(e):""}},tongPhan:{id:"tongPhan",name:"T\u1ed5ng p.\u0103n",className:"text-small font-weight-bold",align:"right",width:70,render:function(e){return e?Object(o.d)(e):""}},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",align:"center",className:"text-small",width:110,render:function(e){return e?i.a.createElement("div",{className:"float-right"},Object(o.d)(e)):""}},ghiChu:{id:"ghiChu",name:"Ghi ch\xfa",className:"text-small",width:230,render:function(e,n,t,a){var o,r=a.datas,l=(null===r||void 0===r||null===(o=r[n.id])||void 0===o?void 0:o.customers)||{},c=Object.keys(l).map((function(e){var n=null===l||void 0===l?void 0:l[e];return{name:null===n||void 0===n?void 0:n.name,tongPhan:null===n||void 0===n?void 0:n.tongPhan,ghiChu:null===n||void 0===n?void 0:n.ghiChu}}));return i.a.createElement("div",null,i.a.createElement("div",null,c.filter((function(e){return null===e||void 0===e?void 0:e.tongPhan})).map((function(e){return"".concat(e.name,": ").concat(e.tongPhan||"--")})).join(", ")),c.filter((function(e){return null===e||void 0===e?void 0:e.ghiChu})).map((function(e){return i.a.createElement("div",{key:e.name,className:"font-weight-bold"},"".concat(e.name,": ").concat(null===e||void 0===e?void 0:e.ghiChu))})))}}}},1068:function(e,n,t){},1070:function(e,n,t){"use strict";var a=t(3),i=t(0),o=t.n(i),r=t(119),l=t(110),c=t(11),u=Array(52).fill(1).reduce((function(e,n,t){return[].concat(Object(a.a)(e),[n+t])}),[]),d=function(e){var n=e.userConfig,t=e.userConfigHandle,a=n.weekId,i=(null===t||void 0===t?void 0:t.setConfig)?t.setConfig:c.noop;return o.a.createElement(r.a,{title:"Ch\u1ecdn tu\u1ea7n"},o.a.createElement(l.a,{value:a,style:{width:"110px"},onChange:function(e){return i(["weekId"],e)}},u.map((function(e){return o.a.createElement(l.a.Option,{key:e,value:e},"Tu\u1ea7n ",e)}))))};d.defaultProps={userConfig:{}},n.a=d},1071:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return y})),t.d(n,"c",(function(){return O}));var a=t(9),i=t(5),o=t(3),r=t(1),l=t(436),c=t.n(l),u=t(470),d=t.n(u),s=t(471),m=t(69),v=t.n(m),f=t(41),h=t(11),g=t(465),b=t(13),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){var t=e.userConfig,l=e.tddtState,c=t.coSoId,u=t.yearId,d=t.weekId,s=t.dayId,m=l.shiftsArray,f=v.a.utils.book_new(),g=null===l||void 0===l?void 0:l.nguyenVatLieuTachsArray,b=m.reduce((function(e,n){var t=(null===l||void 0===l?void 0:l[null===n||void 0===n?void 0:n.id])||[];return t=t.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{shiftName:(null===n||void 0===n?void 0:n.name)||""})})),[].concat(Object(o.a)(e),Object(o.a)(t))}),[]).reduce((function(e,n){var t=n.shiftName,o=(null===n||void 0===n?void 0:n.customers)||{};return Object.entries(o).reduce((function(e,n){var o=Object(i.a)(n,2),l=(o[0],o[1]);return((null===l||void 0===l?void 0:l.ingreRecipe)||[]).reduce((function(e,n){var i=null===n||void 0===n?void 0:n.id,o=(null===e||void 0===e?void 0:e[i])||[],c=null===l||void 0===l?void 0:l.name,u=Object(r.a)(Object(r.a)({},n),{},{custName:c,shiftName:t});return o.push(u),Object(r.a)(Object(r.a)({},e),{},Object(a.a)({},i,o))}),e)}),e)}),{}),p=Object.entries(b).reduce((function(e,n){var t=Object(i.a)(n,2),a=(t[0],t[1].reduce((function(e,n){var t=((null===e||void 0===e?void 0:e.tongDinhLuong)||0)+((null===n||void 0===n?void 0:n.tongDinhLuong)||0),a=((null===e||void 0===e?void 0:e.tongGiaSum)||0)+((null===n||void 0===n?void 0:n.tongGiaSum)||0),i=((null===e||void 0===e?void 0:e.tongPhan)||0)+((null===n||void 0===n?void 0:n.tongPhan)||0);return Object(r.a)(Object(r.a)({},n),{},{tongDinhLuong:t,tongPhan:i,tongGiaSum:a})}),{}));return e.push(a),e}),[]),y=["T\xean NL","T\xean \u0110L","T\u1ed5ng \u0110L","Gi\xe1 NL","Th\xe0nh ti\u1ec1n","NCC"],O=Object(h.groupBy)(p,"nhaCungCapId");Object.entries(O).forEach((function(e){var n=Object(i.a)(e,2),t=n[0],a=n[1].map((function(e){var n=e.tenNguyenLieu,t=void 0===n?"":n,a=e.tongDinhLuong,i=e.tenDonViTinh,o=void 0===i?"":i,r=e.tenNhaCungCap,l=void 0===r?"":r,c=e.giaNguyenLieu,u=void 0===c?0:c;return[t,o,a,u,a*u,l]})),r=v.a.utils.aoa_to_sheet([y].concat(Object(o.a)(a)));v.a.utils.book_append_sheet(f,r,"".concat(t).toUpperCase())}));var j=["tenNguyenLieu","tongDinhLuong"].concat(Object(o.a)(m.map((function(e){return e.name})))),C=["T\xean NL","T\u1ed5ng \u0110L"].concat(Object(o.a)(m.map((function(e){return e.name})))),x=Object.entries(b).filter((function(e){var n=Object(i.a)(e,2),t=(n[0],n[1]);return g.some((function(e){var n;return e===(null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.tenNguyenLieu)}))})).map((function(e){var n=Object(i.a)(e,2),t=(n[0],n[1].reduce((function(e,n){var t=n.tenNguyenLieu,i=n.shiftName,o=n.tongDinhLuong,l=((null===e||void 0===e?void 0:e.tongDinhLuong)||0)+o,c=((null===e||void 0===e?void 0:e[i])||0)+o;return Object(r.a)(Object(r.a)({},e),{},Object(a.a)({tenNguyenLieu:t,tongDinhLuong:l},i,c))}),{}));return j.map((function(e){return(null===t||void 0===t?void 0:t[e])||""}))})),T=v.a.utils.aoa_to_sheet([C].concat(Object(o.a)(x)));v.a.utils.book_append_sheet(f,T,"TachTheoCa"),setTimeout((function(){try{v.a.writeFile(f,"order_".concat(s,"_week_").concat(c,"-").concat(d,"-").concat(u,".xlsx"))}catch(e){console.log(e)}}),1e3)}},y=function(e){return function(n){var t=e.tddtState,i=n.duTruState,l=e.userConfig,u=t.khachHangsArray,m=t.khachHangs,v=t.nhomKhachHangs,h=t.cauHinhDuTrus,p=t.shiftsArray,y=(new f.a).getDuTruConfigConstantsArray(),O=p.reduce((function(e,n){var t="".concat(null===n||void 0===n?void 0:n.id),i=(null===e||void 0===e?void 0:e[t])||{},l=y.reduce((function(e,n){var i,l=n.id,c=u.reduce((function(e,n){var a,i,r=n.id,c=null===h||void 0===h||null===(a=h[r])||void 0===a||null===(i=a[t])||void 0===i?void 0:i[l],u=((null===c||void 0===c?void 0:c.values)||[]).reduce((function(n,t){return e.indexOf(t)>-1?n:[].concat(Object(o.a)(n),[t])}),[]);return[].concat(Object(o.a)(e),Object(o.a)(u))}),[]),d=(null===e||void 0===e?void 0:e.soMonManTheoLoaiMon)||{},s=u.reduce((function(e,n){var i,o,c=n.id,u=n.soMonMan,d=null===h||void 0===h||null===(i=h[c])||void 0===i||null===(o=i[t])||void 0===o?void 0:o[l],s=((null===d||void 0===d?void 0:d.values)||[]).reduce((function(e,n){var t=(null===e||void 0===e?void 0:e[c])||{};return Object(r.a)(Object(r.a)({},e),{},Object(a.a)({},c,Object(r.a)(Object(r.a)({},t),{},Object(a.a)({},n,u))))}),e);return Object(r.a)(Object(r.a)({},e),s)}),d);return Object(r.a)(Object(r.a)({},e),{},(i={},Object(a.a)(i,l,c),Object(a.a)(i,"soMonManTheoLoaiMon",s),i))}),i);return Object(r.a)(Object(r.a)({},e),{},Object(a.a)({},t,l))}),{}),j=p.reduce((function(e,n){var i="".concat(n.id),o=((null===t||void 0===t?void 0:t[i])||[]).reduce((function(e,n){var t=Object(r.a)(Object(r.a)({},n),{},{nguyenLieus:(null===n||void 0===n?void 0:n.ingreRecipe)||[]});return Object.assign(e,Object(a.a)({},n.id,t)),e}),{});return Object.assign(e,Object(a.a)({},i,o)),e}),{});!function(e){var n=e.shiftsArray,t=e.loaiMonShiftAccData,a=e.shiftAccData,i=e.customerGroups,r=e.userConfig,l=(e.customers,r.coSoId),u=r.yearId,m=r.weekId,v=r.dayId,f=function(e){var n=e.shift,r="".concat(n.id),l=(null===t||void 0===t?void 0:t[r])||[],c=(null===a||void 0===a?void 0:a[r])||{},u=g.a.getXuatMenuPdfHeaderFields().reduce((function(e,n){var t=n.id,a=n.header||[],i=(l[t]||[]).reduce((function(e,n){var t=null===c||void 0===c?void 0:c[n],a=null===t||void 0===t?void 0:t.recipeId,i=(null===t||void 0===t?void 0:t.tongPhan)||0,r=(null===t||void 0===t?void 0:t.customers)||{},l=(null===t||void 0===t?void 0:t.nguyenLieus)||{},u=Object.keys(r).reduce((function(e,n){var t=null===r||void 0===r?void 0:r[n],a="".concat(t.name||"",": ").concat(t.tongPhan||0);return[].concat(Object(o.a)(e),[a])}),[]),d=Object.keys(r).reduce((function(e,n){var t=null===r||void 0===r?void 0:r[n];if(!t.ghiChu)return e;var a="".concat(t.name||"",": ").concat(t.ghiChu||"");return[].concat(Object(o.a)(e),[a])}),[]),s=Object.keys(l),m=s.length;if(!a)return e;var v=u.join(", ")+"\n"+d.join("\n"),f=[{text:a,style:"nameRecipeTable",alignment:"left",fillColor:"lightcyan"},{text:"".concat(i," ph\u1ea7n"),style:"nameRecipeTable",alignment:"center",fillColor:"lightcyan"},{text:"Gram",style:"textTable9",alignment:"center",fillColor:"lightcyan",align:"center"},{text:"S\u1ed1 l\u01b0\u1ee3ng",style:"textTable9",alignment:"center",fillColor:"lightcyan",align:"center"},{text:"T\u0110L",style:"textTable9",alignment:"center",fillColor:"lightcyan",align:"center"},{text:v,style:"textTable9",alignment:"left",rowSpan:m+1}],h=s.reduce((function(e,n){var t=null===l||void 0===l?void 0:l[n],a=((null===t||void 0===t?void 0:t.dinhLuong)||0)+0,i=(null===t||void 0===t?void 0:t.tongDinhLuong)||0;i=Math.round(10*i)/10;var r=[{text:"",style:"textTable9",alignment:"left"},{text:t.tenNguyenLieu,style:"textTable9",alignment:"left"},{text:a,style:"textTable9",alignment:"center"},{text:i,style:"textTable10Bold",alignment:"center"},{text:t.tenDonViTinh,style:"textTable9",alignment:"center"},{text:"",style:"textTable9",alignment:"right"}];return[].concat(Object(o.a)(e),[r])}),[]);return[].concat(Object(o.a)(e),[f],Object(o.a)(h))}),[]);return 0===i.length?e:[].concat(Object(o.a)(e),[a],Object(o.a)(i))}),[]),d=Object.keys(i),s=(null===i||void 0===i?void 0:i[null===d||void 0===d?void 0:d[0]])||{},m=((null===l||void 0===l?void 0:l.monManConfig)||[]).reduce((function(e,n){var t=((null===c||void 0===c?void 0:c[n])||{}).customers,a=void 0===t?{}:t;return e+Object.values(a).reduce((function(e,n){var t=n.soMonMan;return e+n.tongPhan/t}),0)}),0)+((null===l||void 0===l?void 0:l.vegConfig)||[]).reduce((function(e,n){var t;return e+((null===c||void 0===c||null===(t=c[n])||void 0===t?void 0:t.tongPhan)||0)}),0)/2;m=Math.round(m);var v=(null===s||void 0===s?void 0:s.dinhLuongGao)||0,f=m*v/1e3;f=Math.round(10*f)/10;var h=[{text:"S\u1ed1 ph\u1ea7n c\u01a1m: ".concat(m),style:"textTable9",alignment:"left"},{text:"G\u1ea1o",style:"textTable9",alignment:"left"},{text:v,style:"textTable9",alignment:"center"},{text:f,style:"textTable10Bold",alignment:"center"},{text:"kg",style:"textTable9",alignment:"center"},{text:"",style:"textTable9",alignment:"right"}];return[].concat(Object(o.a)(u),[[{text:"VIII. G\u1ea0O",style:"kindRecipeTable",fillColor:"yellow",alignment:"left",colSpan:5},"","","","",""],h])};try{var h=d.a.pdfMake.vfs;c.a.vfs=h;var p=[120,100,40,50,40,"*"],y={pageSize:"A4",pageOrientation:"portal",pageMargins:[15,15,15,15],content:n.reduce((function(e,t,a){var i,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{style:"headerStyle",columns:[[{text:"D\u1ef0 TR\xd9: ".concat(e),style:"donDatHangStyle",bold:!0}]]}}(g.a.getTextHeader({canTinId:(null===b.k||void 0===b.k||null===(i=b.k[l])||void 0===i?void 0:i.name)||l,yearId:u,weekId:m,dayId:v,shiftName:t.name})),c={table:{layout:"lightHorizontalLines",headerRows:1,dontBreakRows:!0,widths:p,body:[["T\xean m\xf3n","NL/SPA","\u0110L(gam)","SLTP","T\u0110L","Ghi ch\xfa/ h\u01b0\u1edbng d\u1eabn"].map((function(e){return{text:e,style:"tableHeader",fillColor:"lightblue",alignment:"center"}}))].concat(Object(o.a)(f({shift:t})))}},d=a<n.length-1?{text:"",pageBreak:"before"}:{};return[].concat(Object(o.a)(e),[r,"",c,d])}),[]),styles:s.a,footer:function(e,n){return{columns:[{text:"".concat(e," of ").concat(n),alignment:"right",margin:[0,0,15,10]}]}}},O=window.open("","_blank");c.a.createPdf(y).open({},O)}catch(j){console.log(j)}}({duTruState:i,customers:m,customerGroups:v,shiftsArray:p,loaiMonShiftAccData:O,shiftAccData:j,userConfig:l})}},O=function(){var e,n,t,a,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=o.duTruWeekData,l=o.thucDonDuTruState,c=o.shiftId,u=o.kindId,d=o.dayId,s=(null===l||void 0===l?void 0:l[c])||[],m=s.findIndex((function(e){return"".concat(e.name)==="".concat(u)})),v=m+1,f=null===s||void 0===s?void 0:s[v],h=null===f||void 0===f?void 0:f.name,g=null===r||void 0===r||null===(e=r[c])||void 0===e||null===(n=e.thucDons)||void 0===n||null===(t=n[d])||void 0===t||null===(a=t.kindIds)||void 0===a||null===(i=a[h])||void 0===i?void 0:i.recipeId;return{nextRecipeKindId:h,nextRecipeId:g}}},1139:function(e,n,t){"use strict";t.r(n);var a=t(5),i=t(0),o=t.n(i),r=t(186),l=t(2),c=t(12),u=t(8),d=t.n(u),s=t(67),m=t(351),v=t(37),f=t(119),h=t(84),g=t(242),b=t(104),p=t(137),y=t(129),O=t(448),j=t(54),C=t(127),x=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)n.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(t[a[i]]=e[a[i]])}return t},T=i.forwardRef((function(e,n){var t=Object(s.a)(!1,{value:e.visible,defaultValue:e.defaultVisible}),a=Object(c.a)(t,2),o=a[0],r=a[1],u=function(n,t){var a;r(n),null===(a=e.onVisibleChange)||void 0===a||a.call(e,n,t)},m=function(n){var t;u(!1,n),null===(t=e.onConfirm)||void 0===t||t.call(void 0,n)},T=function(n){var t;u(!1,n),null===(t=e.onCancel)||void 0===t||t.call(void 0,n)},I=i.useContext(y.b).getPrefixCls,E=e.prefixCls,N=e.placement,w=e.children,D=e.overlayClassName,S=x(e,["prefixCls","placement","children","overlayClassName"]),L=I("popover",E),k=I("popconfirm",E),P=d()(k,D),M=i.createElement(b.a,{componentName:"Popconfirm",defaultLocale:p.a.Popconfirm},(function(n){return function(n,t){var a=e.okButtonProps,o=e.cancelButtonProps,r=e.title,c=e.cancelText,u=e.okText,d=e.okType,s=e.icon;return i.createElement("div",{className:"".concat(n,"-inner-content")},i.createElement("div",{className:"".concat(n,"-message")},s,i.createElement("div",{className:"".concat(n,"-message-title")},Object(O.a)(r))),i.createElement("div",{className:"".concat(n,"-buttons")},i.createElement(h.a,Object(l.a)({onClick:T,size:"small"},o),c||t.cancelText),i.createElement(h.a,Object(l.a)({onClick:m},Object(g.a)(d),{size:"small"},a),u||t.okText)))}(L,n)})),A=I();return i.createElement(f.a,Object(l.a)({},S,{prefixCls:L,placement:N,onVisibleChange:function(n){e.disabled||u(n)},visible:o,overlay:M,overlayClassName:P,ref:n,transitionName:Object(C.b)(A,"zoom-big",e.transitionName)}),Object(j.a)(w,{onKeyDown:function(e){var n,t;i.isValidElement(w)&&(null===(t=null===w||void 0===w?void 0:(n=w.props).onKeyDown)||void 0===t||t.call(n,e)),function(e){e.keyCode===v.a.ESC&&o&&u(!1,e)}(e)}}))}));T.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:i.createElement(m.a,null),disabled:!1};var I=T,E=t(1071),N=t(56),w=t(1064),D=t(11),S=t(163),L=t(178),k=t(654),P=t(1070),M=t(110),A={monday:{id:"monday",name:"Th\u1ee9 2",enName:"Monday"},tuesday:{id:"tuesday",name:"Th\u1ee9 3",enName:"Tuesday"},wednesday:{id:"wednesday",name:"Th\u1ee9 4",enName:"Wednesday"},thursday:{id:"thursday",name:"Th\u1ee9 5",enName:"Thursday"},friday:{id:"friday",name:"Th\u1ee9 6",enName:"Friday"},saturday:{id:"saturday",name:"Th\u1ee9 7",enName:"Saturday"},sunday:{id:"sunday",name:"Ch\u1ee7 nh\u1eadt",enName:"Sunday"}},R=[A.monday,A.tuesday,A.wednesday,A.thursday,A.friday,A.saturday,A.sunday],_=function(e){var n=e.userConfig,t=e.userConfigHandle,a=n.dayId,i=(null===t||void 0===t?void 0:t.setConfig)?t.setConfig:D.noop;return o.a.createElement(f.a,{title:"Ch\u1ecdn ng\xe0y"},o.a.createElement(M.a,{value:a,style:{width:"110px"},onChange:function(e){return i(["dayId"],e)}},R.map((function(e){return o.a.createElement(M.a.Option,{key:e.id,value:e.id},e.name)}))))};_.defaultProps={coSoDispatch:D.noop,coSoState:{}};var G=_,H=t(463),V=new(t(143).b),K=function(e){var n=e.userConfig,t=e.userConfigHandle,a=n.coSoId,i=(null===t||void 0===t?void 0:t.setConfig)?t.setConfig:D.noop;return o.a.createElement(k.a,{itemRender:D.noop,className:"mt-2"},o.a.createElement(k.a.Item,null,o.a.createElement(S.NavLink,{to:V.URLS.capNhatDuTruBACD},"T\u1ed5ng h\u1ee3p d\u1ef1 tr\xf9")),o.a.createElement(k.a.Item,null,o.a.createElement(H.a,{defaultCantinId:a,style:{width:"100px"},selectCantin:function(e){return i(["coSoId"],e)},manualCoSoArray:[L.b.xuongDauGiay],isCoSo:!0})),o.a.createElement(k.a.Item,null,o.a.createElement(P.a,{userConfig:n,userConfigHandle:t})),o.a.createElement(k.a.Item,null,o.a.createElement(G,{userConfig:n,userConfigHandle:t})))},B=t(9),z=t(1),U=t(1041),F=t(4),X=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)n.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(t[a[i]]=e[a[i]])}return t},J=function(e){return i.createElement(y.a,null,(function(n){var t,a=n.getPrefixCls,o=n.direction,r=e.prefixCls,c=e.type,u=void 0===c?"horizontal":c,s=e.orientation,m=void 0===s?"center":s,v=e.className,f=e.children,h=e.dashed,g=e.plain,b=X(e,["prefixCls","type","orientation","className","children","dashed","plain"]),p=a("divider",r),y=m.length>0?"-".concat(m):m,O=!!f,j=d()(p,"".concat(p,"-").concat(u),(t={},Object(F.a)(t,"".concat(p,"-with-text"),O),Object(F.a)(t,"".concat(p,"-with-text").concat(y),O),Object(F.a)(t,"".concat(p,"-dashed"),!!h),Object(F.a)(t,"".concat(p,"-plain"),!!g),Object(F.a)(t,"".concat(p,"-rtl"),"rtl"===o),t),v);return i.createElement("div",Object(l.a)({className:j},b,{role:"separator"}),f&&i.createElement("span",{className:"".concat(p,"-inner-text")},f))}))},W=t(23),Y=t(36),q=t(33),Q=t(32),Z=t(223),$=t(1065),ee=function(e){Object(q.a)(t,e);var n=Object(Q.a)(t);function t(e){var a;return Object(W.a)(this,t),(a=n.call(this,e)).tableColumns=[$.b.name],a.gopDuTruColumns=[$.b.loaiMon,$.b.tenMon,$.b.soPhanThem,$.b.soPhanAn,$.b.tongPhan,$.b.ghiChu],a}return Object(Y.a)(t,[{key:"getGopDuTruColumns",value:function(e){var n=this;return this.gopDuTruColumns.map((function(t){return n.getGeneralFields(t,e)}))}}]),t}(Z.a),ne=t(41),te=t(458),ae=(t(1068),t(279)),ie=function(e){var n=e.record,t=o.a.useMemo((function(){return new ae.a}),[]),a=o.a.useMemo((function(){return(null===n||void 0===n?void 0:n.ingreRecipe)||[]}),[n]),i=t.getGopNguyenVatLieuColumns(e);return o.a.createElement("div",{style:{width:"100%"},className:"ingreExpandexItem"},o.a.createElement(U.a,{bordered:!0,size:"small",className:"mb-2",rowKey:"id",columns:i,dataSource:a,pagination:!1,expandable:{expandRowByClick:!0}}))},oe=function(e){var n=e.nguyenLieus,t=e.shiftConfig,i=e.dayId,r=e.anHienShiftState,l=e.anHienShiftDispatch,c="".concat(null===t||void 0===t?void 0:t.id),u=o.a.useMemo((function(){return new ee}),[]),d=o.a.useMemo((function(){return new ne.a}),[]),s=(null===r||void 0===r?void 0:r.anHienShift)||{},m=Object(te.b)(),v=Object(a.a)(m,2),f=v[0],g=v[1],b=f.thucDonDuTrus,p=f.khachHangsArray,y=o.a.useMemo((function(){var e,n,t,a;return null===b||void 0===b||null===(e=b.shiftIds)||void 0===e||null===(n=e[c])||void 0===n||null===(t=n.thucDons)||void 0===t||null===(a=t[i])||void 0===a?void 0:a.kindIds}),[b,c,i]),O=o.a.useMemo((function(){var e,n;return null===b||void 0===b||null===(e=b.shiftIds)||void 0===e||null===(n=e[c])||void 0===n?void 0:n.customerIds}),[b,c,i]),j=o.a.useMemo((function(){return p?d.getGopDuTruDatas(f,c,i,{nguyenLieus:n}):{}}),[p,O,c,i,n]),C=o.a.useMemo((function(){return p?d.getDataSourceDuTruByNhomMon(f,c,i,j):[]}),[p,y,c,i]),x=o.a.useMemo((function(){return C?C.map((function(e){var n=null===e||void 0===e?void 0:e.name,t=(null===j||void 0===j?void 0:j[n])||{};return Object(z.a)(Object(z.a)({},e),t)})):[]}),[C,j]);o.a.useEffect((function(){return g.setState(Object(B.a)({},c,x))}),[x,c]);var T=u.getGopDuTruColumns(Object(z.a)(Object(z.a)({},e),{},{datas:j})),I=!(null===s||void 0===s?void 0:s[c]),E=function(){var e=Object(z.a)(Object(z.a)({},s),{},Object(B.a)({},c,I));l({type:"set",anHienShift:e})};return o.a.createElement("div",{className:"my-3"},o.a.createElement("div",{style:{fontSize:"20px"},className:"mb-2 font-weight-bold text-danger hoverClass text-center",onClick:E},"".concat(null===t||void 0===t?void 0:t.name).toUpperCase()),I?o.a.createElement(U.a,{rowKey:"id",columns:T,dataSource:x,size:"small",bordered:!0,pagination:!1,expandable:{expandedRowRender:function(e){return o.a.createElement(ie,{record:e})},expandRowByClick:!0},scroll:{x:800}}):o.a.createElement("div",{className:"text-center"},o.a.createElement(h.a,{type:"primary",onClick:E},"Xem th\xeam")),o.a.createElement(J,null))},re=t(460),le=t(30),ce=t(126);n.default=function(e){Object(le.i)();var n=Object(te.b)(),t=Object(a.a)(n,2),l=t[0],c=t[1],u=l.shiftsArray,d=l.thucDonDuTrus,s=l.nguyenLieus,m=Object(ce.a)(),v=Object(a.a)(m,1)[0].vendors,f=Object(i.useContext)(N.a),h=Object(i.useContext)(N.b),g=Object(i.useReducer)(r.b,r.g),b=Object(a.a)(g,2),p=b[0],y=b[1],O=Object(re.a)({child:["thucDonDuTruConfig"]}),j=Object(a.a)(O,1)[0],C=(null===j||void 0===j?void 0:j.thucDonDuTruConfig)||{},x=C.coSoId,T=C.yearId,D=C.weekId,S=C.dayId;Object(i.useEffect)((function(){return x&&T&&D&&c.getThucDonDuTrus(x,T,D),function(){return c.stopListenThucDonDuTru(["thucDonDuTrus"])}}),[x,T,D]),Object(i.useEffect)((function(){return x&&c.getThucDonDuTruSettings({coSoId:x}),function(){return c.stopListenThucDonDuTru(["settings"])}}),[x]),Object(i.useEffect)((function(){return c.getNguyenVatLieuTachs(),c.getRecipes(),c.getIngreRecipes(),c.getNguyenLieus(),w.b.getsThucDonDuTruSettings()(f),function(){c.stopListenRecipe()}}),[]);return o.a.createElement("div",null,o.a.createElement(K,{userConfig:C,userConfigHandle:j}),o.a.createElement("div",{className:"mt-2"},o.a.createElement(I,{title:"X\xe1c nh\u1eadn Export chi ti\u1ebft th\u1ef1c \u0111\u01a1n",onConfirm:function(){return Object(E.b)({tddtState:l,nguyenLieus:s,vendors:v,userConfig:C,thucDonDuTrus:d})(h)}},o.a.createElement("button",{className:"btn btn-sm btn-danger"},o.a.createElement("i",{className:"fa fa-file-pdf-o"})," Xu\u1ea5t menu")),o.a.createElement(I,{title:"X\xe1c nh\u1eadn Export",onConfirm:function(){Object(E.a)({nguyenLieus:s,vendors:v,userConfig:C,thucDonDuTrus:d,tddtState:l})(h)}},o.a.createElement("button",{className:"btn btn-sm btn-success ml-1"},o.a.createElement("i",{className:"fa fa-file-excel-o"})," Xu\u1ea5t \u0111\u1eb7t h\xe0ng"))),o.a.createElement("div",null,u?u.map((function(e,n){return o.a.createElement(oe,{key:e.id,index:n,nguyenLieus:s,shiftConfig:e,coSoId:x,dayId:S,anHienShiftState:p,anHienShiftDispatch:y})})):null))}}}]);