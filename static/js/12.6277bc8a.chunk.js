(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[12],{1098:function(e,n,t){"use strict";t.d(n,"a",(function(){return g})),t.d(n,"b",(function(){return p}));var a=t(0),i=t.n(a),o=t(7),r=t(33),l=t(125),c=t(301),u=t(1051),s=t(679),d=t(680),m=t(43),h=c.a.TextArea,v=new l.b,f=new m.a,g={name:{id:"name",name:"Lo\u1ea1i m\xf3n",width:130,fixed:!0,render:function(e,n,t){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=(null===o||void 0===o?void 0:o.recipeKinds)||{};return i.a.createElement("strong",{className:"ml-2",style:{color:"blue"}},(null===r||void 0===r||null===(a=r[e])||void 0===a?void 0:a.name)||e)}},loaiMon:{id:"name",name:"Lo\u1ea1i m\xf3n",className:"text-small",width:130,render:function(e){return i.a.createElement("strong",null,e)}},tenMon:{id:"tenMon",name:"T\xean m\xf3n",className:"text-small",width:190,render:function(e,n,t,a){var o=a.shiftId,l=a.coSoId,c=a.customerId,u=a.dayId,s=a.history,d=a.customerGroupId,m=a.isView,h=e,f=n.id;return h?i.a.createElement("div",{style:{color:"#1012ff"},className:"hoverClass font-weight-bold",onClick:function(){if(m)return null;var e=[[r.c.MODAL_ID,r.a.editRecipe.id],[r.c.COSO_ID,l],[r.c.CUSTOMER_ID,c],[r.c.CUSTOMER_GROUP_ID,d],[r.c.RECIPE_ID,h]];v.pushURL(s,e)}},h):i.a.createElement("div",{className:"hoverClass",onClick:function(){if(console.log(m,"isView"),m)return null;var e=[[r.c.MODAL_ID,r.a.selectRecipe.id],[r.c.SHIFT_ID,o],[r.c.KIND_ID,f],[r.c.DAY_ID,u],[r.c.RECIPE_ID,h]];v.pushURL(s,e)}},"--")}},giaMon:{id:"giaMon",name:"Gi\xe1 m\xf3n",className:"text-small",width:80,align:"center",render:function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=a.giaPhanAn,l=i.a.createElement("strong",{className:"text-danger float-right"},i.a.createElement("sub",null,Object(o.j)(e,r),"%")),c=i.a.createElement(u.a,null,i.a.createElement(s.a,{sm:24}," ",l));return e?c:""}},soPhanThem:{id:"soPhanThem",name:"SP th\xeam",className:"text-small",align:"center",width:80,render:function(e,n,t,a){var o=a.isInput,r=a.setIsInput,l=a.shiftId,c=a.onUpdate,u=a.isView,s="soPhanThem",m=n.id;return o.shiftId!==l||o.type!==s||u?i.a.createElement("div",{className:"hoverClass font-weight-bold",onClick:function(){return r({shiftId:l,type:s,recipeKindId:m})}},e||"--"):i.a.createElement(d.a,{tabIndex:t+1,autoFocus:(null===o||void 0===o?void 0:o.recipeKindId)===m,size:"small",step:5,defaultValue:e||"",onBlur:function(e){var n=Number(e.target.value);c(n,{type:s,recipeKindId:m})}})}},soPhanAn:{id:"soPhanAn",name:"SP \u0103n",align:"center",className:"text-small",width:70,render:function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.isInput,r=a.setIsInput,l=a.shiftId,c=a.onUpdate,u=a.isView,s="soPhanAn",m=n.id,h=n.loaiMonId;return f.checkNotAddSoPhanAn(h)?e||"":o.shiftId!==l||o.type!==s||u?i.a.createElement("div",{className:"hoverClass font-weight-bold",onClick:function(){r({shiftId:l,type:s,recipeKindId:m})}},e||"--"):i.a.createElement(d.a,{tabIndex:t+1,autoFocus:(null===o||void 0===o?void 0:o.recipeKindId)===m,size:"small",min:0,step:10,defaultValue:e||"",onBlur:function(e){var n=Number(e.target.value);c(n,{type:s,recipeKindId:m})}})}},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",align:"right",className:"text-small",width:90,render:function(e){return e?Object(o.d)(e):""}},ghiChu:{id:"ghiChu",name:"Ghi ch\xfa",width:230,className:"text-small",render:function(e,n,t,a){var o=a.isInput,r=a.setIsInput,l=a.shiftId,c=a.onUpdate,u=a.isView,s=n.id;return o.shiftId!==l||"ghiChu"!==o.type||u?i.a.createElement("div",{className:"hoverClass",onClick:function(){return r({shiftId:l,recipeKindId:s,type:"ghiChu"})}},e||"--"):i.a.createElement(h,{rows:3,tabIndex:t+1,autoFocus:s===o.recipeKindId,size:"small",defaultValue:e||"",style:{width:"100%"},onBlur:function(e){var n=e.target.value;c(n,{type:"ghiChu",recipeKindId:s})}})}}},p={name:{id:"name",name:"Lo\u1ea1i m\xf3n",width:110,fixed:!0,render:function(e,n,t){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=(null===o||void 0===o?void 0:o.recipeKinds)||{};return i.a.createElement("strong",{className:"ml-2"},(null===r||void 0===r||null===(a=r[e])||void 0===a?void 0:a.name)||e)}},loaiMon:{id:"tenLoaiMon",name:"Lo\u1ea1i m\xf3n",className:"text-small",width:110,render:function(e){return i.a.createElement("strong",null,e)}},tenMon:{id:"tenMon",name:"T\xean m\xf3n",className:"text-small",width:150,render:function(e){return e&&i.a.createElement("div",{className:"font-weight-bold",style:{color:"blue"}},e)}},giaMon:{id:"giaMon",name:"Gi\xe1 m\xf3n",className:"text-small",width:90,align:"center",render:function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=a.giaPhanAn,l=i.a.createElement("strong",{className:"text-danger float-right"},i.a.createElement("sub",null,Object(o.j)(e,r),"%")),c=i.a.createElement(u.a,null,i.a.createElement(s.a,{sm:24}," ",l));return e?c:""}},soPhanThem:{id:"soPhanThem",name:"SP th\xeam",className:"text-small",align:"right",width:70,render:function(e){return e?Object(o.d)(e):""}},soPhanAn:{id:"soPhanAn",name:"SP \u0103n",className:"text-small",align:"right",width:60,render:function(e){return e?Object(o.d)(e):""}},tongPhan:{id:"tongPhan",name:"T\u1ed5ng p.\u0103n",className:"text-small font-weight-bold",align:"right",width:70,render:function(e){return e?Object(o.d)(e):""}},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",align:"center",className:"text-small",width:110,render:function(e){return e?i.a.createElement("div",{className:"float-right"},Object(o.d)(e)):""}},ghiChu:{id:"ghiChu",name:"Ghi ch\xfa",className:"text-small",width:230,render:function(e,n,t,a){var o,r=a.datas,l=(null===r||void 0===r||null===(o=r[n.id])||void 0===o?void 0:o.customers)||{},c=Object.keys(l).map((function(e){var n=null===l||void 0===l?void 0:l[e];return{name:null===n||void 0===n?void 0:n.name,tongPhan:null===n||void 0===n?void 0:n.tongPhan,ghiChu:null===n||void 0===n?void 0:n.ghiChu}}));return i.a.createElement("div",null,i.a.createElement("div",null,c.filter((function(e){return null===e||void 0===e?void 0:e.tongPhan})).map((function(e){return"".concat(e.name,": ").concat(e.tongPhan||"--")})).join(", ")),c.filter((function(e){return null===e||void 0===e?void 0:e.ghiChu})).map((function(e){return i.a.createElement("div",{key:e.name,className:"font-weight-bold"},"".concat(e.name,": ").concat(null===e||void 0===e?void 0:e.ghiChu))})))}}}},1105:function(e,n,t){"use strict";var a=t(3),i=t(22),o=t(37),r=t(36),l=t(35),c=t(0),u=t.n(c),s=t(228),d=t(43),m=t(1098),h=t(16),v=t.n(h),f=(t(210),t(83)),g=t(103),p=t(196),I=t(11),b=t(7),w=t(472),C=t(27),D=t(33),y=t(125),E=Object(c.memo)((function(e){var n,t,a,i=e.cellId,o=e.row,r=e.history,l=e.dayId,c=e.recipeKindId,s=e.onSelect,d=e.onDelete,m=e.visibleCost,h=e.shiftConfig,v=e.customerGroup,f=e.nguyenLieusTrongMonAn,g=e.thucDonsDatas,p=e.isView,I=e.isAfter,w=e.state.nguyenLieus,E=u.a.useMemo((function(){return new C.a}),[]),O=u.a.useMemo((function(){return new y.b}),[]),N=null===g||void 0===g||null===(n=g[l])||void 0===n||null===(t=n.kindIds)||void 0===t||null===(a=t["".concat(c)])||void 0===a?void 0:a.recipeId,T=null===h||void 0===h?void 0:h.id,j=function(e){e.stopPropagation(),window.confirm("X\xe1c nh\u1eadn x\xf3a ".concat(N))&&d(c,l)},M=u.a.useCallback((function(){var e=(null===f||void 0===f?void 0:f[N])||[];if(0===e.length||!m)return null;var n={nguyenLieus:e},t=(null===v||void 0===v?void 0:v.giaPhanAn)||0,a=E.getRecipePrice(n,w);return u.a.createElement("span",{className:"cost-style"},"(".concat(Object(b.j)(a,t),"%)"))}),[N,f,v,w,m,E]);return u.a.createElement("div",{id:i,className:["recipe-style",N?"":"text-center"].join(" "),style:{overflowY:"auto",fontSize:"14px"},onClick:function(){if(I||p)return null;var e=(null===o||void 0===o?void 0:o.isMonPhu)||!1,n=[[D.c.MODAL_ID,D.a.selectRecipe.id],[D.c.SHIFT_ID,T],[D.c.KIND_ID,c],[D.c.DAY_ID,l],[D.c.IS_MON_PHU,e],[D.c.RECIPE_ID,N]];O.pushURL(r,n),s&&s()}},M()," ",N||(N?u.a.createElement("span",{className:"text-black-50"},"Thi\u1ebfu ".concat(N)):I?"":"--")," ",p||I?null:N&&u.a.createElement("div",{className:"delete-icon",onClick:j},u.a.createElement("i",{className:"fa fa-close"})))}));E.defaultProps={onDelete:I.noop,showSearch:!0,classNames:[],style:{},visibleCost:!0,coSoState:{}};var O=Object(p.a)(f.o,Object(g.b)((function(){return{}}),{getRecipePrice:w.b}))(E),N=t(13),T=function(e){Object(r.a)(t,e);var n=Object(l.a)(t);function t(e){var a;return Object(i.a)(this,t),(a=n.call(this,e)).tableColumns=[m.a.name],a.duTruItemColumns=[m.a.loaiMon,m.a.tenMon,m.a.giaMon,m.a.soPhanThem,m.a.soPhanAn,m.a.thanhTien,m.a.ghiChu],a}return Object(o.a)(t,[{key:"getTableColumns",value:function(e){var n=this,t=e.yearId,i=e.weekId,o=e.onDelete,r=e.state,l=e.isView;if(!i)return[];var c=this.tableColumns.map((function(t){return n.getGeneralFields(t,e)})),s=Array(7).fill(1).reduce((function(n,c,s){var d=c+s,m=Object(b.o)()===N.l.admin,h=v()(t,"YYYY").week(i).day(c+s),f=h.format("dddd"),g=h.format("DD/MM"),p=v()().format("DD-MM-YYYY")===h.format("DD-MM-YYYY"),I=v()().subtract(1,"day").isAfter(h),w=p?{border:"1px solid lightblue"}:{};m&&(I=!1);var C={id:d,name:"".concat(f," (").concat(g,")"),width:160,align:"center",render:function(n,t,a){var i="shift".concat("-",t.id,"-").concat(d);return u.a.createElement("div",{style:w},u.a.createElement(O,Object.assign({},e,{isView:l,state:r,row:t,cellId:i,index:a,dayId:"".concat(f).toLowerCase(),isAfter:I,style:{fontSize:"13px",padding:"3px",height:"40px"},recipeKindId:t.id,onDelete:o})))}};return[].concat(Object(a.a)(n),[C])}),[]).map((function(t){return n.getGeneralFields(t,e)}));return c=[].concat(Object(a.a)(c),Object(a.a)(s))}},{key:"getDuTruItemColumns",value:function(e){var n=this;return this.duTruItemColumns.map((function(t){return n.getGeneralFields(t,e)}))}}]),t}(s.a);T.rootRefs=[].concat(Object(a.a)(d.a.rootRefs),["duTru","bepAnChuyenDi"]);n.a=T},1156:function(e,n,t){"use strict";t.r(n);var a=t(1),i=t(9),o=t(3),r=t(6),l=t(0),c=t.n(l),u=t(664),s=t(1105),d=t(49),m=t(125),h=t(1097),v=t(43),f=t(462),g=function(e){var n=e.shiftConfig,t=e.isHideStyle,g=e.onHideDuTru,p=e.nguyenLieusTrongMonAn,I=e.customerGroup,b=e.shiftDuTruData,w=e.thucDonsDatas,C=e.state,D=e.isView,y=c.a.useMemo((function(){return new s.a}),[]),E=c.a.useMemo((function(){return new v.a}),[]),O=c.a.useMemo((function(){return new m.b}),[]),N=e.userConfig,T=N.coSoId,j=N.yearId,M=N.weekId,P=N.customerId,x=Object(f.a)()[1],A=null===n||void 0===n?void 0:n.id,S=Object(l.useContext)(d.a),k=Object(l.useContext)(d.b),L=k.duTruState,K=void 0===L?{}:L,_=k.duTruSettingState,R=K.isLoading,Y=E.getDuTruConfigConstantsArray(),V=(null===_||void 0===_?void 0:_[v.a.collections.recipeKind.datas])||{},G=null===_||void 0===_?void 0:_[v.a.collections.khachHang.datasArray],U=null===_||void 0===_?void 0:_[v.a.collections.cauHinhDuTru.datas],H=Object(l.useState)(!0),F=Object(r.a)(H,2),z=F[0],B=F[1],J=Object(l.useState)([]),X=Object(r.a)(J,2),q=X[0],Q=X[1];Object(l.useEffect)((function(){var e=[];T&&P&&U&&(e=Y.reduce((function(e,n){var t,a,i=n.id,r=null===U||void 0===U||null===(t=U[P])||void 0===t||null===(a=t[A])||void 0===a?void 0:a[i],l=E.checkIsMonPhu(i),c=((null===r||void 0===r?void 0:r.values)||[]).map((function(e){return{id:e,name:e,isMonPhu:l}}));return[].concat(Object(o.a)(e),Object(o.a)(c))}),[]));var n=Object(i.a)({},A,e);x.setThucDonDataByShift(n),Q(e)}),[T,P,U,G]);var W=O.isHaveRole(O.actions.editDuLieuChung),Z=y.getTableColumns(Object(a.a)(Object(a.a)({},e),{},{state:Object(a.a)({},C),weekId:M,yearId:j,shiftConfig:n,onDelete:function(e,n){if(D)return null;var t=[T,j,M,"shiftIds",A,"thucDons",n,"kindIds",e,"recipeId"];h.a.setThucDonDuTru(t,"")(S)},isEditDuLieuChung:W,visibleCost:z,dataSource:q,isView:D,recipeKinds:V,shiftDuTruData:b,thucDonsDatas:w,nguyenLieusTrongMonAn:p,customerGroup:I}));return c.a.useMemo((function(){return q.length>0}),[q])&&c.a.createElement("div",{className:"duTruBepChuyenDiAntTable"},c.a.createElement("div",{className:"display-4 mt-1 kind-title"},c.a.createElement("div",{className:"hoverClass",onClick:function(){return g(null===n||void 0===n?void 0:n.id)}},null===n||void 0===n?void 0:n.name),c.a.createElement("button",{className:"ml-2 btn btn-sm btn-warning",onClick:function(){return B(!z)}},z?"\u1ea8n":"Hi\u1ec7n"," cost")),c.a.createElement("div",{className:"mt-2",style:Object(a.a)({position:"relative"},t)},c.a.createElement(u.a,{rowKey:"id",bordered:!0,scroll:{x:1300},columns:Z,dataSource:q,loading:R,pagination:!1})))};g.defaultProps={userConfig:{}},n.default=g}}]);